extends Node3D

@onready var camera = $Camera3D
@onready var line2d = $CanvasLayer/Control/Line2D
@onready var line2d2 = $CanvasLayer/Control/Line2D2


var points_2d = [
Vector2(750.6682, 577.5724),
Vector2(765.76624, 580.45593),
Vector2(780.81036, 583.48895),
Vector2(795.7918, 586.6757),
Vector2(810.6998, 590.02106),
Vector2(825.52057, 593.53),
Vector2(840.2373, 597.2081),
Vector2(854.8293, 601.06104),
Vector2(869.27185, 605.0946),
Vector2(883.535, 609.31506),
Vector2(897.5834, 613.72833),
Vector2(911.37506, 618.3406),
Vector2(924.86084, 623.1575),
Vector2(937.9829, 628.1842),
Vector2(950.67413, 633.4254),
Vector2(962.8564, 638.88446),
Vector2(974.4395, 644.5634),
Vector2(985.3198, 650.4626),
Vector2(995.3787, 656.5796),
Vector2(1004.4809, 662.90894),
Vector2(1012.4737, 669.44147),
Vector2(1019.1852, 676.163),
Vector2(1024.424, 683.05334),
Vector2(1027.9785, 690.08575),
Vector2(1029.618, 697.22473),
Vector2(1029.0936, 704.4255),
Vector2(1026.1417, 711.63226),
Vector2(1020.4891, 718.7769),
Vector2(1011.85956, 725.77875),
Vector2(999.9843, 732.5426),
Vector2(984.6138, 738.96045),
Vector2(965.534, 744.9109),
Vector2(942.5839, 750.2621),
Vector2(915.67554, 754.8748),
Vector2(884.8146, 758.6072),
Vector2(850.1186, 761.32056),
Vector2(811.8331, 762.88776),
Vector2(770.3404, 763.20056),
Vector2(726.159, 762.1779),
Vector2(679.93427, 759.77423),
Vector2(632.4159, 755.9838),
Vector2(584.42645, 750.8449),
Vector2(536.8216, 744.4393),
Vector2(490.4462, 736.8881),
Vector2(446.09155, 728.3465),
Vector2(404.4573, 718.9932),
Vector2(366.12274, 709.02167),
Vector2(331.52905, 698.6286),
Vector2(300.9726, 688.0051),
Vector2(274.61002, 677.3284),
Vector2(252.47008, 666.7566),
Vector2(234.47307, 656.4244),
Vector2(220.45187, 646.4421),
Vector2(210.17426, 636.8957),
Vector2(203.36404, 627.8484),
Vector2(199.71918, 619.3431),
Vector2(198.92749, 611.40485),
Vector2(200.67867, 604.044),
Vector2(204.67322, 597.25934),
Vector2(210.6287, 591.0404),
Vector2(218.28381, 585.37),
Vector2(227.40054, 580.226),
Vector2(237.76442, 575.58344),
Vector2(249.18462, 571.41534),
Vector2(261.4929, 567.694),
Vector2(274.54193, 564.3917),
Vector2(288.20386, 561.4815),
Vector2(302.36807, 558.9374),
Vector2(316.93982, 556.7346),
Vector2(331.83832, 554.85),
Vector2(346.99487, 553.26196),
Vector2(362.35162, 551.9505),
Vector2(377.86005, 550.8972),
Vector2(393.47964, 550.0854),
Vector2(409.177, 549.49976),
Vector2(424.92453, 549.1265),
Vector2(440.70004, 548.9533),
Vector2(456.4855, 548.969),
Vector2(472.26678, 549.16376),
Vector2(488.0327, 549.52875),
Vector2(503.7749, 550.0564),
Vector2(519.4872, 550.7399),
Vector2(535.16516, 551.5736),
Vector2(550.806, 552.55255),
Vector2(566.408, 553.6727),
Vector2(581.9706, 554.9307),
Vector2(597.4936, 556.32404),
Vector2(612.97754, 557.8507),
Vector2(628.42334, 559.5094),
Vector2(643.8318, 561.29956),
Vector2(659.20386, 563.22107),
Vector2(674.5401, 565.27435),
Vector2(689.84076, 567.46045),
Vector2(705.1054, 569.781),
Vector2(720.3329, 572.23804),
Vector2(735.5212, 574.83405),
Vector2(750.6667, 577.5721)
]

var points_3d = [
Vector3(5.6167956313727E10, 2.4107088169726434E8, -9.009693182315295E10),
Vector3(6.112449076319902E10, -4.8954654196015424E8, -8.680391685175243E10),
Vector3(6.587026525526701E10, -1.2184757809202113E9, -8.321160120972081E10),
Vector3(7.038870815548561E10, -1.9431993361717672E9, -7.933211266492395E10),
Vector3(7.466381528843245E10, -2.6612044811795793E9, -7.517838143846967E10),
Vector3(7.868017293723485E10, -3.3699862229335446E9, -7.076413134238147E10),
Vector3(8.242298304777884E10, -4.067050406251232E9, -6.610387217004425E10),
Vector3(8.587809094720337E10, -4.749917015452838E9, -6.121289300688803E10),
Vector3(8.903201586763972E10, -5.416123727895267E9, -5.6107256094571976E10),
Vector3(9.187198454569122E10, -6.063229774214822E9, -5.0803790844991615E10),
Vector3(9.438596814491747E10, -6.688820160406223E9, -4.532008756049953E10),
Vector3(9.65627227215345E10, -7.290510306960189E9, -3.967449037365766E10),
Vector3(9.839183342148656E10, -7.865951160069617E9, -3.388608887365085E10),
Vector3(9.986376255869281E10, -8.412834829248406E9, -2.797470783739251E10),
Vector3(1.0096990167822278E11, -8.928900804413694E9, -2.196089443178067E10),
Vector3(1.0170262765290973E11, -9.41194280336061E9, -1.5865902200221266E10),
Vector3(1.0205536279591455E11, -9.859816297378525E9, -9.711671092461285E9),
Vector3(1.0202263889341101E11, -1.0270446758261078E10, -3.5208027433824825E9),
Vector3(1.0160016496932137E11, -1.0641838663864712E10, 2.6834698444568005E9),
Vector3(1.0078489848643591E11, -1.0972085291364788E10, 8.87731910570993E9),
Vector3(9.95751195640565E10, -1.125937931712332E10, 1.5036367133933332E10),
Vector3(9.797050765060606E10, -1.1502024229288733E10, 2.1135738276335262E10),
Vector3(9.597221993002777E10, -1.1698446543580502E10, 2.7150121069343914E10),
Vector3(9.3582970563525E10, -1.1847208793879242E10, 3.305384047411884E10),
Vector3(9.08071096744274E10, -1.1947023247013493E10, 3.8820941337095955E10),
Vector3(8.765070077600436E10, -1.1996766265359879E10, 4.44252839354677E10),
Vector3(8.41215951235513E10, -1.1995493211528883E10, 4.984065236514817E10),
Vector3(8.022950124835326E10, -1.1942453756635462E10, 5.5040876383196236E10),
Vector3(7.598604770931361E10, -1.1837107417805916E10, 5.9999967122180786E10),
Vector3(7.140483688726355E10, -1.1679139112261478E10, 6.469226684564315E10),
Vector3(6.650148745844443E10, -1.1468474475462149E10, 6.909261260810329E10),
Vector3(6.129366303056119E10, -1.120529465064714E10, 7.317651331845197E10),
Vector3(5.5801084322066605E10, -1.0890050218290232E10, 7.692033928329846E10),
Vector3(5.004552222909525E10, -1.0523473898479229E10, 8.030152283165523E10),
Vector3(4.405076917137364E10, -1.0106591629340923E10, 8.329876810317328E10),
Vector3(3.784258625455627E10, -9.64073160293985E9, 8.589226753273509E10),
Vector3(3.144862404600158E10, -9.127530829304861E9, 8.806392200339825E10),
Vector3(2.489831514480537E10, -8.5689388020945215E9, 8.97975610913931E10),
Vector3(1.82227372406709E10, -7.967217858397509E9, 9.107915931964566E10),
Vector3(1.1454445998890831E10, -7.324939862317662E9, 9.189704390220625E10),
Vector3(4.627277871061974E9, -6.644978898633366E9, 9.224208913502432E10),
Vector3(-2.223876205404845E9, -5.930499739289079E9, 9.210789240240005E10),
Vector3(-9.063324319705135E9, -5.184941940905774E9, 9.14909267538105E10),
Vector3(-1.5854851441339401E10, -4.411999543658504E9, 9.039066518723941E10),
Vector3(-2.2562017783449673E10, -3.6155964671096144E9, 8.880967216814746E10),
Vector3(-2.914847294457061E10, -2.7998578319015403E9, 8.675365852153703E10),
Vector3(-3.557828031252312E10, -1.969077571463063E9, 8.423149664818231E10),
Vector3(-4.181624559483516E10, -1.1276828281487048E9, 8.125519401034488E10),
Vector3(-4.782824293120624E10, -2.8019574630140674E8, 7.783982396828714E10),
Vector3(-5.3581531879312904E10, 5.688066263410555E8, 7.400341427539925E10),
Vector3(-5.9045058665590645E10, 1.414733543766434E9, 6.976679479649268E10),
Vector3(-6.418973546082032E10, 2.2530220444000216E9, 6.515340723584716E10),
Vector3(-6.898869206204886E10, 3.07917787140395E9, 6.018908078447074E10),
Vector3(-7.34174952064557E10, 3.8888150129524384E9, 5.49017785609595E10),
Vector3(-7.745433176366188E10, 4.677693099264714E9, 4.932132047900345E10),
Vector3(-8.10801531944895E10, 5.44175197606953E9, 4.347908869282585E10),
Vector3(-8.427877986422386E10, 6.177142880352307E9, 3.740772203202044E10),
Vector3(-8.70369649941356E10, 6.880255767258601E9, 3.1140805838841957E10),
Vector3(-8.934441916759892E10, 7.547742469794462E9, 2.471256337967543E10),
Vector3(-9.119379732605284E10, 8.176535508302094E9, 1.815755454760109E10),
Vector3(-9.2580651056066E10, 8.763862497896994E9, 1.1510386944476316E10),
Vector3(-9.350334965565102E10, 9.307256223342218E9, 4.805443674944399E9),
Vector3(-9.396297396291917E10, 9.804560557644709E9, -1.9233686502679176E9),
Vector3(-9.396318723293858E10, 1.0253932489819433E10, -8.642849071458246E9),
Vector3(-9.351008746986082E10, 1.0653840597024498E10, -1.5320706823657413E10),
Vector3(-9.261204558008607E10, 1.1003060346191023E10, -2.1925740303225704E10),
Vector3(-9.12795335333405E10, 1.1300666641056955E10, -2.8427990229460648E10),
Vector3(-8.95249464301449E10, 1.1546024043756971E10, -3.479886741546552E10),
Vector3(-8.736242200519357E10, 1.1738775098046425E10, -4.101125609966716E10),
Vector3(-8.480766067446442E10, 1.1878827166440699E10, -4.703959421747041E10),
Vector3(-8.187774878468642E10, 1.196633816877076E10, -5.285993231368073E10),
Vector3(-7.859098726881857E10, 1.2001701577578293E10, -5.844997301725154E10),
Vector3(-7.496672746811734E10, 1.1985530988895817E10, -6.378909313073304E10),
Vector3(-7.102521546374298E10, 1.1918644547482624E10, -6.885835043960205E10),
Vector3(-6.678744587826352E10, 1.180204946537562E10, -7.364047733447952E10),
Vector3(-6.227502576590447E10, 1.163692683315976E10, -7.811986327513715E10),
Vector3(-5.751004891297344E10, 1.1424616885802776E10, -8.228252802151959E10),
Vector3(-5.2514980617091415E10, 1.1166604850041681E10, -8.611608742504085E10),
Vector3(-4.731255280435938E10, 1.0864507468673983E10, -8.960971342296626E10),
Vector3(-4.1925669174623665E10, 1.0520060268969084E10, -9.275408971811781E10),
Vector3(-3.637731993298114E10, 1.0135105617856262E10, -9.554136446218684E10),
Vector3(-3.069050556642595E10, 9.711581585493563E9, -9.796510109894858E10),
Vector3(-2.4888169053720303E10, 9.25151162109476E9, -1.0002022836763716E11),
Vector3(-1.8993135849884724E10, 8.756995030236454E9, -1.0170299031948264E11),
Vector3(-1.3028060959978914E10, 8.230198230979645E9, -1.030108970637997E11),
Vector3(-7.01538240631421E9, 7.673346756700448E9, -1.0394267683507088E11),
Vector3(-9.772803954480324E8, 7.088717966203455E9, -1.044982298595887E11),
Vector3(5.0643584967557335E9, 6.478634416170967E9, -1.0467858439929414E11),
Vector3(1.1087972784637442E10, 5.8454578469836445E9, -1.0448585526099077E11),
Vector3(1.7072353815447514E10, 5.1915837301555805E9, -1.0392320498037688E11),
Vector3(2.299667040673881E10, 4.519436323810206E9, -1.02994807821393E11),
Vector3(2.8840490961118546E10, 3.831464181566063E9, -1.0170581667119249E11),
Vector3(3.458380361172599E10, 3.1301360597069793E9, -1.0006233285851988E11),
Vector3(4.020703492285166E10, 2.41793716741857E9, -9.807137887731624E10),
Vector3(4.569106764216493E10, 1.697365705043303E9, -9.574087395687973E10),
Vector3(5.1017257974517944E10, 9.709296356221489E8, -9.307961238382649E10),
Vector3(5.616745282244805E10, 2.4114363536499736E8, -9.009724444843239E10)
]



# Called when the node enters the scene tree for the first time.
func _ready():
	#pass # Replace with function body.
	
	var cameraTransform = camera.get_camera_transform()
	#viewMatrix.x[3] = 
	print("cameraTransform: %s" % cameraTransform)
	print("projectionMatrix: %s" % camera.get_camera_projection())
	

	var points_2d_local = []
	for point in points_3d:
		var scaled3d = point / 10_000_000_000
		var point_2d = camera.unproject_position(scaled3d)
		print("2d=%s" % point_2d)
		points_2d_local.append(point_2d)
		
		
	line2d.points = points_2d_local
	
	pass

# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta):
	#var points_2d_local = []
	#for point in points_3d:
		#var scaled3d = point / 10_000_000_000
		#var point_2d = camera.unproject_position(scaled3d)
		##print("2d=%s" % point_2d)
		#points_2d_local.append(point_2d)
		#
		#
	#line2d.points = points_2d_local
	line2d2.points = points_2d

	
	
	#var points_2d = []
	#for point in points_3d:
		#var point_2d = camera.unproject_position(point)
		#points_2d.append(point_2d)
	#line2d.points = points_2d
